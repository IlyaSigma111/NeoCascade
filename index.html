<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NeoCascade Messenger</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0F172A">
</head>
<body>
    <!-- –§–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫ -->
    <div id="video-call-container" class="video-call-container">
        <div class="video-controls glass">
            <button class="call-btn" id="toggle-video">
                <i class="fas fa-video"></i>
                <div class="btn-tooltip">–í–∏–¥–µ–æ</div>
            </button>
            <button class="call-btn" id="toggle-audio">
                <i class="fas fa-microphone"></i>
                <div class="btn-tooltip">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</div>
            </button>
            <button class="call-btn" id="screen-share">
                <i class="fas fa-desktop"></i>
                <div class="btn-tooltip">–≠–∫—Ä–∞–Ω</div>
            </button>
            <button class="call-btn end-call" id="end-call">
                <i class="fas fa-phone-slash"></i>
                <div class="btn-tooltip">–ó–∞–≤–µ—Ä—à–∏—Ç—å</div>
            </button>
        </div>
        <div class="video-grid">
            <div class="video-wrapper local glass">
                <video id="local-video" autoplay muted playsinline></video>
                <div class="video-label glass">
                    <span class="user-tag">–í—ã</span>
                    <span class="status-dot online"></span>
                </div>
            </div>
            <div id="remote-videos" class="remote-videos"></div>
        </div>
        <div class="call-info glass">
            <span id="call-timer"><i class="fas fa-clock"></i> 00:00</span>
            <span id="call-participants"><i class="fas fa-users"></i> 1</span>
            <span id="call-quality"><i class="fas fa-signal"></i> –û—Ç–ª–∏—á–Ω–æ–µ</span>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div class="app-container">
        <!-- –°–∞–π–¥–±–∞—Ä -->
        <div class="sidebar glass">
            <div class="sidebar-header">
                <div class="app-title">
                    <div class="logo-icon">
                        <i class="fas fa-water animate__animated animate__pulse animate__infinite"></i>
                    </div>
                    <div>
                        <h1 class="neon-text">NeoCascade</h1>
                        <p class="app-subtitle">v2.0 Quantum</p>
                    </div>
                </div>
                
                <div class="user-profile">
                    <div class="avatar-wrapper">
                        <div class="avatar glass" id="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-status online"></div>
                    </div>
                    <div class="user-info">
                        <span id="username">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        <small id="user-tag">#0000</small>
                    </div>
                    <div class="user-controls">
                        <button class="icon-btn small theme-toggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                            <i class="fas fa-palette"></i>
                        </button>
                        <button class="icon-btn small" id="logout-btn" title="–í—ã–π—Ç–∏">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ -->
            <div class="search-create-section">
                <div class="search-container glass">
                    <i class="fas fa-search"></i>
                    <input type="text" id="user-search" placeholder="–ù–∞–π—Ç–∏: username#1234">
                    <button class="search-btn" id="search-user">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <button class="create-btn glass" id="create-channel-btn">
                    <i class="fas fa-plus-circle"></i>
                    <span>–°–æ–∑–¥–∞—Ç—å —á–∞—Ç</span>
                </button>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
            <div class="chats-section">
                <div class="section-header">
                    <h3><i class="fas fa-hashtag"></i> –ö–∞–Ω–∞–ª—ã</h3>
                    <button class="icon-btn small" id="refresh-chats">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <div class="chats-list" id="chats-list">
                    <div class="chat-item active" data-chat-id="general">
                        <div class="chat-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="chat-details">
                            <div class="chat-name">üåç –û–±—â–∏–π —á–∞—Ç</div>
                            <div class="chat-activity">
                                <span class="online-count">0 –æ–Ω–ª–∞–π–Ω</span>
                                <span class="last-msg">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å</span>
                            </div>
                        </div>
                        <div class="chat-badge">
                            <i class="fas fa-bolt"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –õ–° -->
            <div class="dms-section">
                <div class="section-header">
                    <h3><i class="fas fa-user-friends"></i> –õ–°</h3>
                    <span class="badge" id="dm-count">0</span>
                </div>
                <div class="dms-list" id="dms-list"></div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ -->
            <button class="floating-action-btn glass" id="start-group-call">
                <i class="fas fa-video"></i>
                <span class="pulse-ring"></span>
            </button>
        </div>

        <!-- –û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
        <div class="chat-area glass">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ -->
            <div class="chat-header glass">
                <div class="chat-partner">
                    <div class="avatar-wrapper">
                        <div class="avatar">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="chat-status online"></div>
                    </div>
                    <div class="chat-info">
                        <h3 id="chat-title">–û–±—â–∏–π —á–∞—Ç</h3>
                        <p id="chat-topic">–ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ</p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" id="pin-messages" title="–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ">
                        <i class="fas fa-thumbtack"></i>
                    </button>
                    <button class="action-btn" id="notifications-toggle" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                        <i class="fas fa-bell"></i>
                    </button>
                    <button class="action-btn" id="chat-info-btn" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="action-btn call-btn-glow" id="join-call-btn" title="–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è">
                        <i class="fas fa-video"></i>
                        <span class="call-indicator"></span>
                    </button>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="messages-container" id="messages-container">
                <div class="welcome-screen animate__animated animate__fadeIn">
                    <div class="welcome-icon">
                        <i class="fas fa-water"></i>
                    </div>
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ NeoCascade</h2>
                    <p>–ö–≤–∞–Ω—Ç–æ–≤–æ–µ –æ–±—â–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
                    <div class="features-grid">
                        <div class="feature">
                            <i class="fas fa-bolt"></i>
                            <span>–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-shield-alt"></i>
                            <span>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-video"></i>
                            <span>4K –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-gamepad"></i>
                            <span>–ú–∏–Ω–∏-–∏–≥—Ä—ã</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –≠–º–æ—Ü–∏–∏ -->
            <div class="emoji-picker glass" id="emoji-picker">
                <div class="emoji-categories">
                    <button class="emoji-category active">üòÄ</button>
                    <button class="emoji-category">üëç</button>
                    <button class="emoji-category">üéÆ</button>
                    <button class="emoji-category">ü¶Ñ</button>
                </div>
                <div class="emoji-grid">
                    <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <!-- –í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="message-input glass">
                <div class="input-actions">
                    <button class="input-action-btn" id="attach-btn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button class="input-action-btn" id="emoji-btn" title="–≠–º–æ–¥–∑–∏">
                        <i class="fas fa-smile"></i>
                    </button>
                    <button class="input-action-btn" id="voice-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="message-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ... (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ / –¥–ª—è –∫–æ–º–∞–Ω–¥)">
                    <div class="typing-indicator" id="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <button class="send-btn glow" id="send-btn">
                    <i class="fas fa-paper-plane"></i>
                    <div class="send-wave"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="login-modal" id="login-modal">
        <div class="login-container glass animate__animated animate__zoomIn">
            <div class="login-header">
                <div class="logo-spin">
                    <i class="fas fa-water"></i>
                </div>
                <h2 class="neon-text">NeoCascade</h2>
                <p>–ö–≤–∞–Ω—Ç–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</p>
            </div>
            
            <div class="login-form">
                <div class="form-group floating-label">
                    <input type="email" id="login-email" required>
                    <label>Email</label>
                    <i class="fas fa-envelope"></i>
                </div>
                
                <div class="form-group floating-label">
                    <input type="password" id="login-password" required>
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <i class="fas fa-lock"></i>
                </div>
                
                <button class="btn-primary glow" id="email-login-btn">
                    <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                </button>
                
                <div class="divider">
                    <span>–∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑</span>
                </div>
                
                <div class="social-login">
                    <button class="social-btn google" id="google-login-btn">
                        <i class="fab fa-google"></i>
                    </button>
                    <button class="social-btn github" id="github-login-btn">
                        <i class="fab fa-github"></i>
                    </button>
                    <button class="social-btn discord" id="discord-login-btn">
                        <i class="fab fa-discord"></i>
                    </button>
                </div>
                
                <p class="register-link">
                    –ù–µ—Ç –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞? 
                    <a href="#" id="show-register" class="neon-link">
                        –°–æ–∑–¥–∞—Ç—å —Ç—É–Ω–Ω–µ–ª—å
                    </a>
                </p>
            </div>
        </div>
        
        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div class="register-form glass" id="register-form">
            <div class="login-header">
                <div class="logo-spin">
                    <i class="fas fa-user-astronaut"></i>
                </div>
                <h2 class="neon-text">–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <p>–°—Ç–∞–Ω—å—Ç–µ —á–∞—Å—Ç—å—é –ø–æ—Ç–æ–∫–∞</p>
            </div>
            
            <div class="login-form">
                <div class="form-group floating-label">
                    <input type="text" id="register-name" required>
                    <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <i class="fas fa-user"></i>
                </div>
                
                <div class="form-group floating-label">
                    <input type="email" id="register-email" required>
                    <label>Email</label>
                    <i class="fas fa-envelope"></i>
                </div>
                
                <div class="form-group floating-label">
                    <input type="password" id="register-password" required>
                    <label>–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 8 —Å–∏–º–≤–æ–ª–æ–≤)</label>
                    <i class="fas fa-lock"></i>
                </div>
                
                <div class="form-group floating-label">
                    <input type="password" id="register-password-confirm" required>
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    <i class="fas fa-lock"></i>
                </div>
                
                <button class="btn-primary glow" id="email-register-btn">
                    <i class="fas fa-user-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫–≤–∞–Ω—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
                </button>
                
                <p class="register-link">
                    –£–∂–µ –≤ –ø–æ—Ç–æ–∫–µ? 
                    <a href="#" id="show-login" class="neon-link">
                        –í–æ–π—Ç–∏ –≤ —Ç—É–Ω–Ω–µ–ª—å
                    </a>
                </p>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞ -->
    <div class="modal glass" id="create-channel-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–°–æ–∑–¥–∞–Ω–∏–µ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞</label>
                    <input type="text" id="channel-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ì–µ–π–º–∏–Ω–≥">
                </div>
                <div class="form-group">
                    <label>–¢–æ–ø–∏–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" id="channel-topic" placeholder="–û —á–µ–º —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª?">
                </div>
                <div class="form-group">
                    <label>–¢–∏–ø –∫–∞–Ω–∞–ª–∞</label>
                    <select id="channel-type">
                        <option value="public">üåç –ü—É–±–ª–∏—á–Ω—ã–π</option>
                        <option value="private">üîí –ü—Ä–∏–≤–∞—Ç–Ω—ã–π</option>
                        <option value="voice">üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancel-create">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary glow" id="confirm-create">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ç–æ–∫</button>
            </div>
        </div>
    </div>

    <!-- –ì–æ–ª–æ—Å–æ–≤–∞—è –∑–∞–ø–∏—Å—å -->
    <div class="voice-recorder glass" id="voice-recorder">
        <div class="voice-wave">
            <canvas id="voice-waveform"></canvas>
        </div>
        <div class="voice-controls">
            <button class="voice-btn" id="cancel-recording">
                <i class="fas fa-times"></i>
            </button>
            <div class="recording-time">
                <i class="fas fa-circle"></i>
                <span id="recording-timer">00:00</span>
            </div>
            <button class="voice-btn send" id="send-recording">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notifications-container" id="notifications-container"></div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="script.js"></script>
    <script>
        // PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∞
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
