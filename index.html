<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>NeoCascade | –ö–≤–∞–Ω—Ç–æ–≤—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00f3ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ========== –ú–û–î–ê–õ–ö–ê –í–•–û–î–ê ========== -->
    <div id="login-modal" class="modal">
        <div class="modal-content glass">
            <div class="modal-header">
                <div class="quantum-logo">
                    <i class="fas fa-water"></i>
                    <i class="fas fa-circle quantum-pulse"></i>
                </div>
                <h2>NeoCascade</h2>
                <p>–ö–≤–∞–Ω—Ç–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –æ–±—â–µ–Ω–∏—è</p>
            </div>
            
            <div class="modal-body">
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <div id="login-form">
                    <div class="form-group">
                        <input type="email" id="login-email" placeholder="Email" required>
                        <i class="fas fa-envelope input-icon"></i>
                    </div>
                    
                    <div class="form-group">
                        <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <i class="fas fa-lock input-icon"></i>
                    </div>
                    
                    <button class="btn btn-primary" id="email-login-btn">
                        <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏
                    </button>
                    
                    <div class="divider">–∏–ª–∏</div>
                    
                    <button class="btn btn-google" id="google-login-btn">
                        <i class="fab fa-google"></i> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                    </button>
                    
                    <button class="btn btn-admin" id="admin-login-btn">
                        <i class="fas fa-crown"></i> –í–æ–π—Ç–∏ –∫–∞–∫ –ê–¥–º–∏–Ω
                    </button>
                    
                    <p class="switch-form">
                        –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="show-register">–°–æ–∑–¥–∞—Ç—å</a>
                    </p>
                </div>
                
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div id="register-form" style="display: none;">
                    <div class="form-group">
                        <input type="text" id="register-name" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
                        <i class="fas fa-user input-icon"></i>
                    </div>
                    
                    <div class="form-group">
                        <input type="email" id="register-email" placeholder="Email" required>
                        <i class="fas fa-envelope input-icon"></i>
                    </div>
                    
                    <div class="form-group">
                        <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6)" required>
                        <i class="fas fa-lock input-icon"></i>
                    </div>
                    
                    <button class="btn btn-primary" id="email-register-btn">
                        <i class="fas fa-user-plus"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                    </button>
                    
                    <p class="switch-form">
                        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="show-login">–í–æ–π—Ç–∏</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== –í–ò–î–ï–û–ó–í–û–ù–û–ö ========== -->
    <div id="video-call-container" class="video-call">
        <div class="video-grid">
            <div class="video-wrapper glass">
                <video id="local-video" autoplay muted playsinline></video>
                <div class="video-label">–í—ã</div>
            </div>
            <div id="remote-videos"></div>
        </div>
        <div class="video-controls glass">
            <button class="btn-call" id="toggle-video">
                <i class="fas fa-video"></i>
            </button>
            <button class="btn-call" id="toggle-audio">
                <i class="fas fa-microphone"></i>
            </button>
            <button class="btn-call btn-end" id="end-call">
                <i class="fas fa-phone-slash"></i>
            </button>
        </div>
    </div>

    <!-- ========== –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° ========== -->
    <div class="container">
        <!-- ===== –°–ê–ô–î–ë–ê–† ===== -->
        <div class="sidebar glass" id="sidebar">
            <div class="sidebar-header">
                <div class="app-logo">
                    <i class="fas fa-water"></i>
                    <h1>NeoCascade</h1>
                    <span class="beta-badge">BETA</span>
                </div>
                
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button class="btn-icon" id="feed-btn" title="–õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏">
                        <i class="fas fa-rss"></i>
                        <span class="notification-badge" id="feed-badge">3</span>
                    </button>
                    <button class="btn-icon" id="create-group-btn" title="–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É">
                        <i class="fas fa-plus-circle"></i>
                    </button>
                </div>
                
                <div class="user-profile">
                    <div class="avatar" id="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <span id="username">–ì–æ—Å—Ç—å</span>
                        <small id="user-status" class="offline">–Ω–µ –≤ —Å–µ—Ç–∏</small>
                    </div>
                    <button class="btn-icon" id="logout-btn" title="–í—ã–π—Ç–∏">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
            <div class="chat-search">
                <i class="fas fa-search"></i>
                <input type="text" id="chat-search" placeholder="–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤...">
            </div>
            
            <div class="chat-list" id="chat-list">
                <div class="chat-item active" data-chat="general">
                    <div class="chat-icon" style="background: linear-gradient(135deg, #3B82F6, #1E40AF);">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">–û–±—â–∏–π —á–∞—Ç</div>
                        <div class="chat-preview">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</div>
                    </div>
                    <button class="btn-call-mini" data-chat="general">
                        <i class="fas fa-phone"></i>
                    </button>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –∑–≤–æ–Ω–∫–∞ -->
            <button class="btn-video" id="start-group-call">
                <i class="fas fa-video"></i>
                <span>–ù–∞—á–∞—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫</span>
            </button>
        </div>

        <!-- ===== –û–ë–õ–ê–°–¢–¨ –ß–ê–¢–ê ===== -->
        <div class="chat-area">
            <div class="chat-header glass">
                <div class="chat-title">
                    <div class="avatar" id="current-chat-avatar">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div>
                        <h3 id="chat-title">–û–±—â–∏–π —á–∞—Ç</h3>
                        <p id="chat-status">‚ö° 127 –æ–Ω–ª–∞–π–Ω</p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="btn-icon" id="join-call-btn" disabled>
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="btn-icon" id="chat-info-btn">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="messages" id="messages-container">
                <div class="welcome">
                    <div class="welcome-icon">
                        <i class="fas fa-water"></i>
                    </div>
                    <h2>NeoCascade Messenger</h2>
                    <p>–ö–≤–∞–Ω—Ç–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –æ–±—â–µ–Ω–∏—è</p>
                    <p class="hint">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–∞—Ç—å—Å—è</p>
                </div>
            </div>

            <!-- –í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="message-input glass">
                <button class="btn-voice" id="voice-btn" title="–£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –¥–ª—è –∑–∞–ø–∏—Å–∏">
                    <i class="fas fa-microphone"></i>
                </button>
                <input type="text" id="message-input" placeholder="–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è" disabled>
                <button class="btn-send" id="send-btn" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- ========== –õ–ï–ù–¢–ê –ê–ö–¢–ò–í–ù–û–°–¢–ò ========== -->
    <div class="feed-panel glass" id="feed-panel">
        <div class="feed-header">
            <h3><i class="fas fa-rss"></i> –õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
            <button class="btn-icon" id="close-feed">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="feed-filters">
            <button class="feed-filter active" data-filter="all">üè† –í—Å–µ</button>
            <button class="feed-filter" data-filter="trending">üî• –•–∏—Ç</button>
            <button class="feed-filter" data-filter="media">üì∏ –ú–µ–¥–∏–∞</button>
            <button class="feed-filter" data-filter="my">üë§ –ú–æ–∏</button>
        </div>
        
        <div class="feed-tabs">
            <button class="feed-tab active" data-tab="latest">üïê –°–≤–µ–∂–µ–µ</button>
            <button class="feed-tab" data-tab="popular">‚≠ê –õ—É—á—à–µ–µ</button>
            <button class="feed-tab" data-tab="following">üîî –ü–æ–¥–ø–∏—Å–∫–∏</button>
        </div>
        
        <div id="feed-container" class="feed-container">
            <div class="feed-loading">
                <div class="quantum-loader"></div>
                <span>–ö–≤–∞–Ω—Ç–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
        </div>
    </div>

    <!-- ========== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ========== -->
    <div class="admin-panel glass" id="admin-panel">
        <div class="admin-header">
            <h3><i class="fas fa-crown" style="color: #FFD700;"></i> –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
            <button class="btn-icon" id="close-admin-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-section">
            <h4><i class="fas fa-bullhorn"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h4>
            <textarea id="admin-announcement" class="admin-input" placeholder="–¢–µ–∫—Å—Ç –≤–∞–∂–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è..." rows="3"></textarea>
            <button class="btn btn-primary" id="send-announcement-btn">
                <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º
            </button>
        </div>
        
        <div class="admin-section">
            <h4><i class="fas fa-users"></i> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–Ω–ª–∞–π–Ω</h4>
            <div id="online-users-list" class="online-users-list"></div>
        </div>
        
        <div class="admin-section">
            <h4><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                    <span class="stat-value" id="total-users">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è</span>
                    <span class="stat-value" id="messages-today">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤</span>
                    <span class="stat-value" id="active-chats">0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –®–∞–±–ª–æ–Ω –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è -->
    <template id="voice-message-template">
        <div class="voice-message">
            <button class="btn-play">
                <i class="fas fa-play"></i>
            </button>
            <div class="voice-wave"></div>
            <span class="voice-duration">0:00</span>
        </div>
    </template>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg.scope))
                    .catch(err => console.error('SW –æ—à–∏–±–∫–∞:', err));
            });
        }
    </script>

    <!-- Firebase –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
